{% case template %}
  {% when 'collection' %}
    {{ 'js.cookie.min.js' | asset_url | script_tag }}
    <script type="text/javascript">
      var magicCookies = Cookies.noConflict();
      magicCookies.set('collection', '{{ collection.handle }}');
    </script>
  {% when 'cart' %}
    {{ 'js.cookie.min.js' | asset_url | script_tag }}
    <script type="text/javascript">
      var magicCookies = Cookies.noConflict();
      var magicCookiesCollecton = magicCookies.get('collection');
      if (magicCookiesCollecton === undefined || magicCookiesCollecton === null) {
        magicCookies.set('collection', 'all');
      }
      var magicCookiesTargetLinks = document.getElementsByClassName('continue-shopping');
      for ( var i in magicCookiesTargetLinks )
        if ( magicCookiesTargetLinks[i].className && magicCookiesTargetLinks[i].className.indexOf('continue-shopping') != -1 )
          magicCookiesTargetLinks[i].href = ("\/collections\/") + magicCookiesCollecton;
    </script>
{% endcase %}
